# Weather App Server Monitoring Configuration
# Place this file in: /usr/local/nagios/etc/servers/weatherapp.cfg
# Then restart Nagios: sudo systemctl restart nagios.service

# Define the Weather App Host
define host{
    use                     linux-server
    host_name               weatherapp-server
    alias                   Weather App Server
    address                 WEATHERAPP_SERVER_IP
    check_command           check-host-alive
    max_check_attempts      5
    check_interval          5
    retry_interval          1
    check_period            24x7
    notification_interval   60
    notification_period     24x7
    contacts                nagiosadmin
}

# Monitor HTTP Service (Web Application)
define service{
    use                     local-service
    host_name               weatherapp-server
    service_description     HTTP Service
    check_command           check_http
    max_check_attempts      3
    check_interval          5
    retry_interval          1
    contacts                nagiosadmin
}

# Monitor Nginx Service (TCP Port 80)
define service{
    use                     local-service
    host_name               weatherapp-server
    service_description     Nginx Service
    check_command           check_tcp!80
    max_check_attempts      3
    check_interval          5
    retry_interval          1
    contacts                nagiosadmin
}

# Monitor CPU Load (via NRPE)
define service{
    use                     local-service
    host_name               weatherapp-server
    service_description     CPU Load
    check_command           check_nrpe!check_load
    max_check_attempts      3
    check_interval          10
    retry_interval          2
    contacts                nagiosadmin
}

# Monitor Memory Usage (via NRPE)
define service{
    use                     local-service
    host_name               weatherapp-server
    service_description     Memory Usage
    check_command           check_nrpe!check_memory
    max_check_attempts      3
    check_interval           10
    retry_interval          2
    contacts                nagiosadmin
}

# Monitor Disk Space (via NRPE)
define service{
    use                     local-service
    host_name               weatherapp-server
    service_description     Disk Space
    check_command           check_nrpe!check_disk
    max_check_attempts      3
    check_interval           30
    retry_interval          5
    contacts                nagiosadmin
}

# Monitor Total Processes (via NRPE)
define service{
    use                     local-service
    host_name               weatherapp-server
    service_description     Total Processes
    check_command           check_nrpe!check_total_procs
    max_check_attempts      3
    check_interval          10
    retry_interval          2
    contacts                nagiosadmin
}

# Monitor SSH Service (TCP Port 22)
define service{
    use                     local-service
    host_name               weatherapp-server
    service_description     SSH Service
    check_command           check_tcp!22
    max_check_attempts      3
    check_interval           10
    retry_interval          2
    contacts                nagiosadmin
}
